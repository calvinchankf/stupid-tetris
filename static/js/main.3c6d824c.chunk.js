(this["webpackJsonpstupid-tetris"]=this["webpackJsonpstupid-tetris"]||[]).push([[0],{13:function(e,t,a){e.exports=a(21)},18:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(7),s=a.n(c),i=(a(18),a(4)),u=a.n(i),h=a(1),d=a(8),l=a(2),p=a(12),f=a(9),v=a(3),b=a(11),m=(a(20),a(5)),w=a(10),k=function(){function e(t,a,n,r){Object(l.a)(this,e),this.shapes=t,this.shapeIdx=a,this.coordinates=n,this.anchor=r}return Object(w.a)(e,[{key:"rotate",value:function(){for(var e=(this.shapeIdx+1)%this.shapes.length,t=this.shapes[e],a=[[].concat(Object(m.a)(this.anchor),Object(m.a)(this.coordinates[0]))],n=[],r={};a.length>0;){var o=a.shift(),c=Object(h.a)(o,4),s=c[0],i=c[1],u=c[2],d=c[3];if(!(s<0||s>=t.length||i<0||i>=t[0].length)&&t[s][i]>0){var l="".concat(s,",").concat(i);if(l in r)continue;r[l]=!0,n.push([u,d]),a.push([s-1,i,u-1,d]),a.push([s+1,i,u+1,d]),a.push([s,i-1,u,d-1]),a.push([s,i+1,u,d+1])}}return[e,n]}},{key:"setCoordinates",value:function(e){this.coordinates=e}},{key:"setShapeIdxAndCoordinates",value:function(e,t){this.shapeIdx=e,this.coordinates=t}}]),e}(),O=[{shapes:[[[1,1],[1,1]]],shapeIdx:0,coordinates:[[0,4],[0,5],[1,4],[1,5]],anchor:[0,0]},{shapes:[[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]],shapeIdx:0,coordinates:[[0,5],[0,3],[0,4],[0,6]],anchor:[0,2]},{shapes:[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],shapeIdx:0,coordinates:[[1,5],[0,5],[1,4],[1,6]],anchor:[1,1]},{shapes:[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]]],shapeIdx:0,coordinates:[[1,5],[0,5],[0,4],[1,6]],anchor:[1,1]},{shapes:[[[0,1,1],[1,1,0],[0,0,0]],[[1,0,0],[1,1,0],[0,1,0]]],shapeIdx:0,coordinates:[[1,5],[0,5],[0,6],[1,4]],anchor:[1,1]}],x=function(){var e=Math.floor(Math.random()*O.length),t=O[e];return new k(t.shapes,t.shapeIdx,t.coordinates,t.anchor)},z=function(e){return new Promise((function(t){return setTimeout(t,e)}))},g={},j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=Object(d.a)(u.a.mark((function e(){var t,r,o,c,s,i,d,l,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.addGameEventListeners(),n=x(),a.paintBoard(n.coordinates),e.next=5,z(500);case 5:if(t=a.state.puzzle,!a.checkCollision(t)){e.next=9;break}return e.abrupt("break",26);case 9:if(r=a.checkIfTouched(),o=Object(h.a)(r,2),c=o[0],s=o[1],c){e.next=14;break}a.paintBoard(s),e.next=22;break;case 14:for(i=0;i<t.length;i++)d=t[i],l="".concat(d[0],",").concat(d[1]),g[l]=!0;if(!((p=a.findFullRows()).length>0)){e.next=19;break}return e.next=19,z(100);case 19:a.clearFullRows(p),n=x(),a.paintBoard(n.coordinates);case 22:return e.next=24,z(500);case 24:e.next=5;break;case 26:window.confirm("\u274c\u274c\u274c GAME OVER \u274c\u274c\u274c")&&window.location.reload();case 28:case"end":return e.stop()}}),e)}))),a.createBoard=function(){for(var e=[],t=0;t<20;t++){for(var a=[],n=0;n<10;n++)a.push(0);e.push(a)}return e},a.addGameEventListeners=function(){window.addEventListener("keydown",function(e){var t,a;switch(e.key){case"ArrowUp":var r=n.rotate(),o=r[0];a=r[1],this.checkCollision(a)||(n.setShapeIdxAndCoordinates(o,a),this.paintBoard(a));break;case"ArrowRight":var c=this.movePuzzle(0,1),s=Object(h.a)(c,2);t=s[0],a=s[1],t||this.paintBoard(a);break;case"ArrowDown":var i=this.movePuzzle(1,0),u=Object(h.a)(i,2);t=u[0],a=u[1],t||this.paintBoard(a);break;case"ArrowLeft":var d=this.movePuzzle(0,-1),l=Object(h.a)(d,2);t=l[0],a=l[1],t||this.paintBoard(a)}}.bind(Object(v.a)(a)))},a.movePuzzle=function(e,t){for(var n=a.state.puzzle,r=!1,o=[],c=0;c<n.length;c++){var s=n[c],i=s[0]+e,u=s[1]+t,h="".concat(i,",").concat(u);if(i<0||20===i||u<0||10===u||h in g){r=!0;break}o.push([i,u])}return[r,o]},a.checkCollision=function(e){for(var t=!1,a=0;a<e.length;a++){var n=e[a],r=n[0],o=n[1],c="".concat(r,",").concat(o);if(r<0||20===r||o<0||10===o||c in g){t=!0;break}}return t},a.checkIfTouched=function(){for(var e=a.state.puzzle,t=!1,n=[],r=0;r<e.length;r++){var o=e[r],c=o[0]+1,s="".concat(c,",").concat(o[1]);if(20===c||s in g){t=!0;break}n.push([c,o[1]])}return[t,n]},a.paintBoard=function(e){n.setCoordinates(e);var t=a.paintPuzzleOnBoard(e);t=a.paintOccupiesdOnBoard(t),a.setState({board:t,puzzle:e})},a.paintPuzzleOnBoard=function(e){for(var t=a.createBoard(),n=0;n<e.length;n++){var r=e[n],o=r[0],c=r[1];t[o][c]=1}return t},a.paintOccupiesdOnBoard=function(e){for(var t in g){var a=t.split(","),n=Object(h.a)(a,2),r=n[0],o=n[1];r=parseInt(r),o=parseInt(o),e[r][o]=1}return e},a.findFullRows=function(){for(var e=a.state.board,t=[],n=0;n<e.length;n++){for(var r=!0,o=0;o<e[n].length;o++)if(0===e[n][o]){r=!1;break}r&&t.push(n)}return t},a.clearFullRows=function(e){for(var t={},a=Object.keys(g),n=function(n){var r=a[n],o=r.split(","),c=Object(h.a)(o,2),s=c[0],i=c[1];if(s=parseInt(s),i=parseInt(i),e.indexOf(s)>-1)return"continue";var u=0;if(e.forEach((function(e){e>s&&(u+=1)})),u>0){var d="".concat(s+u,",").concat(i);t[d]=!0}else t[r]=!0},r=0;r<a.length;r++)n(r);g=t},a.render=function(){var e=a.state.board.map((function(e,t){return o.a.createElement("div",{key:t,className:"row"},e.map((function(e,a){var n="cell";return 9===a&&(n+=" last-col"),19===t&&(n+=" last-row"),1===e&&(n+=" colored"),o.a.createElement("div",{key:a,className:n})})))})),t=o.a.createElement("div",{className:"board"},e);return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("div",null,"Keyboard Controls"),o.a.createElement("div",null,"ArrowUp: rotate"),o.a.createElement("div",null,"ArrowRight: to the left"),o.a.createElement("div",null,"ArrowLeft: to the right"),o.a.createElement("div",null,"ArrowDown: drop faster")),t)},a.state={board:a.createBoard(),puzzle:void 0},a}return Object(b.a)(t,e),t}(r.Component);s.a.render(o.a.createElement(j,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.3c6d824c.chunk.js.map