(this["webpackJsonpstupid-tetris"]=this["webpackJsonpstupid-tetris"]||[]).push([[0],{13:function(e,t,n){e.exports=n(21)},18:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(7),s=n.n(c),i=(n(18),n(4)),u=n.n(i),h=n(1),d=n(8),l=n(2),p=n(12),f=n(9),v=n(3),b=n(11),k=(n(20),n(5)),O=n(10),m=function(){function e(t,n,a,r){Object(l.a)(this,e),this.shapes=t,this.shapeIdx=n,this.coordinates=a,this.anchor=r}return Object(O.a)(e,[{key:"rotate",value:function(){for(var e=(this.shapeIdx+1)%this.shapes.length,t=this.shapes[e],n=[[].concat(Object(k.a)(this.anchor),Object(k.a)(this.coordinates[0]))],a=[],r={};n.length>0;){var o=n.shift(),c=Object(h.a)(o,4),s=c[0],i=c[1],u=c[2],d=c[3];if(!(s<0||s>=t.length||i<0||i>=t[0].length)&&t[s][i]>0){var l="".concat(s,",").concat(i);if(l in r)continue;r[l]=!0,a.push([u,d]),n.push([s-1,i,u-1,d]),n.push([s+1,i,u+1,d]),n.push([s,i-1,u,d-1]),n.push([s,i+1,u,d+1])}}return[e,a]}},{key:"setCoordinates",value:function(e){this.coordinates=e}},{key:"setShapeIdxAndCoordinates",value:function(e,t){this.shapeIdx=e,this.coordinates=t}}]),e}(),w=[{shapes:[[[1,1],[1,1]]],shapeIdx:0,coordinates:[[0,4],[0,5],[1,4],[1,5]],anchor:[0,0]},{shapes:[[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]]],shapeIdx:0,coordinates:[[0,5],[0,3],[0,4],[0,6]],anchor:[0,2]},{shapes:[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]],shapeIdx:0,coordinates:[[1,5],[0,5],[1,4],[1,6]],anchor:[1,1]}],z=function(){var e=Math.floor(Math.random()*w.length),t=w[e];return new m(t.shapes,t.shapeIdx,t.coordinates,t.anchor)},x=function(e){return new Promise((function(t){return setTimeout(t,e)}))},j={},g=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=Object(d.a)(u.a.mark((function e(){var t,r,o,c,s,i,d,l,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.addGameEventListeners(),a=z(),n.paintBoard(a.coordinates),e.next=5,x(500);case 5:if(t=n.state.puzzle,!n.checkCollision(t)){e.next=9;break}return e.abrupt("break",26);case 9:if(r=n.checkIfTouched(),o=Object(h.a)(r,2),c=o[0],s=o[1],c){e.next=14;break}n.paintBoard(s),e.next=22;break;case 14:for(i=0;i<t.length;i++)d=t[i],l="".concat(d[0],",").concat(d[1]),j[l]=!0;if(!((p=n.findFullRows()).length>0)){e.next=19;break}return e.next=19,x(100);case 19:n.clearFullRows(p),a=z(),n.paintBoard(a.coordinates);case 22:return e.next=24,x(500);case 24:e.next=5;break;case 26:window.confirm("\u274c\u274c\u274c GAME OVER \u274c\u274c\u274c")&&window.location.reload();case 28:case"end":return e.stop()}}),e)}))),n.createBoard=function(){for(var e=[],t=0;t<20;t++){for(var n=[],a=0;a<10;a++)n.push(0);e.push(n)}return e},n.addGameEventListeners=function(){window.addEventListener("keydown",function(e){var t,n;switch(e.key){case"ArrowUp":var r=a.rotate(),o=r[0];n=r[1],this.checkCollision(n)||(a.setShapeIdxAndCoordinates(o,n),this.paintBoard(n));break;case"ArrowRight":var c=this.movePuzzle(0,1),s=Object(h.a)(c,2);t=s[0],n=s[1],t||this.paintBoard(n);break;case"ArrowDown":var i=this.movePuzzle(1,0),u=Object(h.a)(i,2);t=u[0],n=u[1],t||this.paintBoard(n);break;case"ArrowLeft":var d=this.movePuzzle(0,-1),l=Object(h.a)(d,2);t=l[0],n=l[1],t||this.paintBoard(n)}}.bind(Object(v.a)(n)))},n.movePuzzle=function(e,t){for(var a=n.state.puzzle,r=!1,o=[],c=0;c<a.length;c++){var s=a[c],i=s[0]+e,u=s[1]+t,h="".concat(i,",").concat(u);if(i<0||20===i||u<0||10===u||h in j){r=!0;break}o.push([i,u])}return[r,o]},n.checkCollision=function(e){for(var t=!1,n=0;n<e.length;n++){var a=e[n],r=a[0],o=a[1],c="".concat(r,",").concat(o);if(r<0||20===r||o<0||10===o||c in j){t=!0;break}}return t},n.checkIfTouched=function(){for(var e=n.state.puzzle,t=!1,a=[],r=0;r<e.length;r++){var o=e[r],c=o[0]+1,s="".concat(c,",").concat(o[1]);if(20===c||s in j){t=!0;break}a.push([c,o[1]])}return[t,a]},n.paintBoard=function(e){a.setCoordinates(e);var t=n.paintPuzzleOnBoard(e);t=n.paintOccupiesdOnBoard(t),n.setState({board:t,puzzle:e})},n.paintPuzzleOnBoard=function(e){for(var t=n.createBoard(),a=0;a<e.length;a++){var r=e[a],o=r[0],c=r[1];t[o][c]=1}return t},n.paintOccupiesdOnBoard=function(e){for(var t in j){var n=t.split(","),a=Object(h.a)(n,2),r=a[0],o=a[1];r=parseInt(r),o=parseInt(o),e[r][o]=1}return e},n.findFullRows=function(){for(var e=n.state.board,t=[],a=0;a<e.length;a++){for(var r=!0,o=0;o<e[a].length;o++)if(0===e[a][o]){r=!1;break}r&&t.push(a)}return t},n.clearFullRows=function(e){for(var t={},n=Object.keys(j),a=function(a){var r=n[a],o=r.split(","),c=Object(h.a)(o,2),s=c[0],i=c[1];if(s=parseInt(s),i=parseInt(i),e.indexOf(s)>-1)return"continue";var u=0;if(e.forEach((function(e){e>s&&(u+=1)})),u>0){var d="".concat(s+u,",").concat(i);t[d]=!0}else t[r]=!0},r=0;r<n.length;r++)a(r);j=t},n.render=function(){var e=n.state.board.map((function(e,t){return o.a.createElement("div",{key:t,className:"row"},e.map((function(e,n){var a="cell";return 9===n&&(a+=" last-col"),19===t&&(a+=" last-row"),1===e&&(a+=" colored"),o.a.createElement("div",{key:n,className:a})})))})),t=o.a.createElement("div",{className:"board"},e);return o.a.createElement("div",null,t)},n.state={board:n.createBoard(),puzzle:void 0},n}return Object(b.a)(t,e),t}(r.Component);s.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.b9588182.chunk.js.map